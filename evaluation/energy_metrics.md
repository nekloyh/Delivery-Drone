# Energy metrics

In the report we propose to evaluate agents not only on their success
rate and task completion time but also on their energy efficiency and
motion comfort.  This file outlines how to compute those metrics from
episode logs.

## Metrics to compute

* **Total energy consumption:** defined as the integral of the sum of
  squared control inputs over time, i.e. \(\int \sum_i u_i^2\,\mathrm{d}t\).
  Since the environment logs `energy` at each step as the sum of
  squared thrusts multiplied by the time step, the total energy for
  an episode is simply the sum of the `energy` column.

* **Average jerk:** the mean of the jerk magnitude recorded at each
  step.  Jerk is computed in the environment as the finite
  difference of acceleration.  High jerk indicates aggressive or
  uncomfortable manoeuvres.

* **Maximum jerk:** the largest jerk value observed in an episode.
  This metric helps identify outliers where the agent performs very
  sudden motions.

* **Jerk CDF:** a cumulative distribution function of jerk values
  across all episodes.  Plotting the CDF allows you to compare how
  often the agents produce high jerk.  For example, one might
  consider 95th percentile jerk as a safety proxy.

## Suggested implementation

1. Read one or more log files generated by the agents.  Each row of
   the log corresponds to an episode and should contain at least the
   columns defined in `logging/schema.md` (success, collisions, time,
   energy, mean_jerk, max_jerk, etc.).

2. Concatenate logs if evaluating multiple agents.  Add a column
   indicating the agent name to facilitate grouping.

3. Use pandas or numpy to compute summary statistics.  For example,
   group by `agent` and compute the mean and standard deviation of
   `energy_j`, `mean_jerk` and `max_jerk`.

4. Optionally generate plots using matplotlib:
   * Bar charts comparing mean energy or jerk across agents.
   * CDF plots of jerk values (collect all jerk values across
     episodes and use `numpy.sort` to build the cumulative curve).

5. Save the computed metrics and figures for inclusion in your report.

Remember to include citations to the report sections when discussing
your findings.
